<div
    {{ attributes }}
>
    {% if isSuccessful %}
        <div>Welcome {{ newUserEmail }}!</div>
    {% else %}
        {{ form_start(form, {
            attr: {
                novalidate: true,
                'data-action': 'live#action:prevent',
                'data-live-action-param': 'saveRegistration',
            }
        }) }}
        <div class="mb-3">
            {{ form_label(form.email, null, {'label_attr': {'class': 'form-label'}}) }}
            {{ form_widget(form.email, {
                'attr': {
                    'class': 'form-control ' ~ (form.email.vars.submitted and not form.email.vars.valid ? 'is-invalid' : (form.email.vars.submitted and form.email.vars.valid ? 'is-valid' : ''))
                }
            }) }}
            {% if form.email.vars.errors|length > 0 %}
                <div class="invalid-feedback">
                    {{ form.email.vars.errors|first.message }}
                </div>
            {% endif %}
        </div>

        <div class="mb-3">
            {{ form_label(form.username, null, {'label_attr': {'class': 'form-label'}}) }}
            {{ form_widget(form.username, {
                'attr': {
                    'class': 'form-control ' ~ (form.username.vars.submitted and not form.username.vars.valid ? 'is-invalid' : (form.username.vars.submitted and form.username.vars.valid ? 'is-valid' : ''))
                }
            }) }}
            {% if form.username.vars.errors|length > 0 %}
                <div class="invalid-feedback">
                    {{ form.username.vars.errors|first.message }}
                </div>
            {% endif %}
        </div>

        <div class="mb-3">
            {{ form_label(form.password, null, {'label_attr': {'class': 'form-label'}}) }}
            {{ form_widget(form.password, {
                'attr': {
                    'class': 'form-control ' ~ (form.password.vars.submitted and not form.password.vars.valid ? 'is-invalid' : (form.password.vars.submitted and form.password.vars.valid ? 'is-valid' : ''))
                }
            }) }}
            {% if form.password.vars.errors|length > 0 %}
                <div class="invalid-feedback">
                    {{ form.password.vars.errors|first.message }}
                </div>
            {% endif %}
        </div>

        <div class="mb-3">
            {{ form_label(form.profile_picture, null, {'label_attr': {'class': 'form-label'}}) }}
            {{ form_widget(form.profile_picture, {
                'attr': {
                    'class': 'form-control ' ~ (form.profile_picture.vars.submitted and not form.profile_picture.vars.valid ? 'is-invalid' : (form.profile_picture.vars.submitted and form.profile_picture.vars.valid ? 'is-valid' : ''))
                }
            }) }}
            {% if form.profile_picture.vars.errors|length > 0 %}
                <div class="invalid-feedback">
                    {{ form.profile_picture.vars.errors|first.message }}
                </div>
            {% endif %}
        </div>

        <div class="mb-3">
            <button type="submit" class="btn btn-primary {{ this.hasValidationErrors ? 'disabled' : '' }}">S'inscrire</button>
        </div>

        {{ form_rest(form) }}
        
        {{ form_end(form) }}
    {% endif %}
</div>